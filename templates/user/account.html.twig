{% extends 'base.html.twig' %}

{% block body %}
    <div class="relative flex flex-row items-center space-x-4 pt-12 pb-16 pl-16">
        <div class="relative">
            {#				<div class="absolute bg-white w-40 p-px ml-1 opacity-60"></div>#}
            <div class="relative borderGradiantEffect w-40 opacity-90 mt-px pt-1 mr-1"></div>
        </div>
        {#			<h1 class="absolute top-12 right-px">Connexion</h1>#}
        <h1 class="h1Gradiant">Mon compte</h1>
    </div>

    <div class="flex flex-col pt-4 pb-24 w-290 lg:w-1080 mx-auto">
        <div class="form-container">
        <form action='/update-user/{{ user.id }}' method='POST' class="form-front relative w-full px-4 py-7 lg:px-28 lg:py-10" enctype="multipart/form-data">
{#            <div class="flex flex-col lg:flex-row items-center lg:space-x-16 uppercase italic mb-8 text-sm lg:text-base hidden" id="edit-image-preview">#}
{#                {% if user.image %}#}
{#                    <div class="rounded-full border border-white h-24 w-24 bg-cover" style="background-image: url('/img/{{ user.image }}')"></div>#}
{#                {% else %}#}
{#                    <div id="img-preview"></div>#}
{#                {% endif %}#}
{#            </div>#}
            <div class="flex flex-col lg:flex-row items-center pb-4 lg:pb-8" id="userProfilePicture">
                {% if user.image %}
                    <div id="image-user" class="rounded-full border border-white w-24 h-24 bg-cover bg-center"
                         style="background-image: url('img/{{ user.image }}')">
                    </div>
                    <div id="edit-image-user-preview" class="hidden rounded-full border border-white h-24 w-24 bg-cover bg-center">
                    </div>
                {% else %}
                    <div id="image-user-preview" class="rounded-full border border-white h-24 w-24 bg-cover bg-center">
                    </div>
                {% endif %}
                {{ field("file", "Image", "", "", {type: "file"}) }}
            </div>
            <div class="flex flex-col lg:flex-row lg:space-x-11 lg:items-center">
                {{ field("nom", "Nom","Nom", user.lastname) }}
                {{ field("prenom", "Prénom","Prénom", user.firstname) }}
            </div>
            <div class="flex flex-col lg:flex-row lg:space-x-11 lg:items-center">
                {{ field("mail", "Email","Email", user.mail) }}
                {{ field("date", "Date de naissance","Date de naissance" , user.birthdate, {type: 'date'}) }}
            </div>
            <div class="flex flex-col lg:flex-row lg:space-x-11 lg:items-center lg:pb-8">
            <div class="flex flex-col">
                <div class="flex flex-row pb-4 passwordDisplay lg:items-center w-full sm:w-400 space-x-4">
                    <input type="checkbox" id="checkboxChangePassword" class="cursor-pointer checked:glowEffect">
                    <label for="checkboxChangePassword" class="cursor-pointer">Modifier le mot de passe</label>
                </div>
                <div class="flex flex-col hidden" id="divPassword">
                    {{ field("oldPassword", "Ancien mot de passe","Ancien mot de passe",'',  {type: "password"}) }}
                    {{ field("password", "Mot de passe","Mot de passe",'',  {type: "password"}) }}
                    {{ field("confirmPassword", "Confirmation du mot de passe","Confirmation du mot de passe","", {type: "password"}) }}
                </div>

            </div>
            </div>
            <div class="submit-wrapper">
                <div class="submit-container">
                    <div class="submit-container2">
                        <div class="submit-container-black">
                            <input type='submit' class="relative submit-front flex uppercase py-0.5 sm:py-2 lg:px-12" value="Modifier"/>
                        </div>
                    </div>
                </div>
            </div>
        </form>
        </div>

        {# Données pour les évenements #}
        {% for event in events %}
        
            <div class="bg-[url('/img/{{ event.event.image }}')]">
                <div class="card_event">
                    <h2 class="title">{{ event.event.titre_event }}</h2> 
                    <a href="detail-category/{{ event.event.id_cat }}"> {{ event.event.titre_category }} </a>
                    <span> {{ event.event.price }} € </span>
                    <br>
                    {{ event.event.date }}
                    <br>
                    {{ event.event.image }}
                    {# Compte le nombre de caractère et affiche maximum x caractère + ... #}
                    {{ event.event.description|striptags|length > 100 ? event.event.description|striptags|slice(0, 100) ~ '...' : event.event.description|striptags }}
                    <br>
                    <a href="detail-event/{{ event.event.id_event }}"> Plus </a>
                    {{event.nb.nombre}}
                    <a href="/my-account/delet-event/{{ event.event.id_event }}"> Se désinscrire </a>
                </div>
            </div>
            
            <hr>
        {% endfor %}
    </div>


{% endblock %}
